<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Golden Fingers Sk√∂vde - Boka Nu!</title>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <style>
        body { 
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4); 
            font-family: 'Arial', sans-serif; 
            animation: gradientShift 5s ease infinite; 
            margin: 0; padding: 20px;
        }
        @keyframes gradientShift { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
        .container { max-width: 1200px; margin: auto; text-align: center; }
        h1 { 
            font-size: 4em; 
            background: linear-gradient(45deg, #FFD700, #FFA500, white); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            animation: glow 2s ease-in-out infinite alternate; 
            margin-bottom: 10px;
        }
        @keyframes glow { from { text-shadow: 0 0 20px #FFD700; } to { text-shadow: 0 0 30px #FFA500; } }
        .btn { 
            background: linear-gradient(45deg, #FFD700, #FFA500); 
            padding: 20px 40px; 
            border: none; 
            border-radius: 50px; 
            font-size: 22px; 
            cursor: pointer; 
            margin: 10px; 
            animation: pulse 2s infinite; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        @keyframes pulse { 0%,100%{transform:scale(1);} 50%{transform:scale(1.05);} }
        .slot { 
            padding: 25px 30px; margin: 15px; border-radius: 25px; cursor: pointer; 
            font-size: 24px; font-weight: bold; transition: all 0.4s; 
            display: inline-block; min-width: 120px;
        }
        .available { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; box-shadow: 0 10px 25px rgba(76,175,80,0.5); }
        .available:hover { transform: scale(1.1); }
        .booked { background: linear-gradient(45deg, #f44336, #da190b); color: white; box-shadow: 0 10px 25px rgba(244,67,54,0.5); }
        #bookings { 
            background: rgba(255,255,255,0.95); padding: 30px; border-radius: 25px; 
            margin: 30px auto; max-width: 800px; box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        #bookingForm { 
            background: linear-gradient(135deg, white, #f8f9fa); padding: 40px; 
            border-radius: 25px; max-width: 500px; margin: 30px auto; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); display: none;
        }
        input, select { width: 100%; padding: 15px; margin: 15px 0; border: 2px solid #ddd; border-radius: 15px; font-size: 16px; box-sizing: border-box; }
        .swish-qr { max-width: 200px; margin: 20px auto; display: block; }
        .warning { background: linear-gradient(45deg, #ff9800, #f57c00); color: white; padding: 15px; border-radius: 15px; font-weight: bold; margin: 20px 0; }
        .lang-btn { position: fixed; top: 20px; right: 20px; z-index: 1000; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Toggle -->
        <button class="btn lang-btn" onclick="toggleLang()" style="font-size: 16px; padding: 10px 20px;">üá∏üá™ SV / üá∏üá¶ AR</button>
        
        <h1>üèÜ Golden Fingers Sk√∂vde üèÜ</h1>
        <p style="font-size: 2em; color: white; font-weight: bold; margin-bottom: 30px;">
            B√§sta Klipp 250 SEK | Ny Kund 99 SEK
        </p>
        
        <h2 id="timeTitle" style="color: white; font-size: 2.5em;">V√§lj Tid Idag (8 platser)</h2>
        
        <!-- Booking Slots -->
        <div id="slots" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;"></div>
        
        <!-- Current Bookings -->
        <div id="bookings">
            <h3 style="color: #333;">üìÖ Dagens Bokningar</h3>
            <div id="bookingList"></div>
        </div>
        
        <!-- Booking Form -->
        <div id="bookingForm">
            <h3 style="color: #333;">üìã Boka Din Tid</h3>
            <input type="text" id="name" placeholder="Fullt Namn" required>
            <input type="tel" id="phone" placeholder="Telefonnummer (+46...)" required>
            <input type="email" id="customerEmail" placeholder="E-postadress" required>
            <select id="service" style="font-size: 18px;">
                <option value="250">‚úÇÔ∏è Vanlig Klippning 250 SEK</option>
                <option value="99">üéâ Ny Kund Special 99 SEK</option>
            </select>
            <button class="btn" onclick="bookSlot()" style="font-size: 20px;">‚úÖ BOKA & BETALA SWISH</button>
            
            <div class="warning">
                ‚ö†Ô∏è <strong>AVBOKNINGSPOLICY:</strong> Ingen √•terbetalning! Betalda pengar f√∂rloras vid avbokning.
            </div>
            
            <div style="margin-top: 20px;">
                <h4>üí∞ Swish Betalning:</h4>
                <p style="font-size: 24px; font-weight: bold; color: #4CAF50;">1236112585</p>
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=SWISH:1236112585" alt="Swish QR" class="swish-qr">
                <p><em>Skanna QR eller ange nummer efter bokning</em></p>
            </div>
        </div>
    </div>

    <script>
        // EmailJS - ÿ≥ÿ¨ŸÑ ŸÖÿ¨ÿßŸÜÿßŸã: dashboard.emailjs.com
        emailjs.init("YOUR_EMAILJS_PUBLIC_KEY"); // ÿ∂ÿπ ŸÖŸÅÿ™ÿßÿ≠ŸÉ ŸáŸÜÿß
        
        let lang = 'sv';
        const salonPhone = '+46724444101';
        const salonEmail = 'omar1tftnaze@gmail.com';
        const swishNumber = '1236112585';
        
        // 8 Slots ÿ≠ÿ≥ÿ® ÿ≥ÿßÿπÿßÿ™ŸÉ (10:00-17:00)
        const slots = ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00'];
        let bookings = JSON.parse(localStorage.getItem('goldenFingersBookings')) || [];
        let selectedTime = null;

        function toggleLang() {
            lang = lang === 'sv' ? 'ar' : 'sv';
            document.getElementById('timeTitle').textContent = 
                lang === 'sv' ? 'V√§lj Tid Idag (8 platser)' : 'ÿßÿÆÿ™ÿ± ŸàŸÇÿ™ ÿßŸÑŸäŸàŸÖ (8 ŸÖŸàÿßÿπŸäÿØ)';
        }

        function initSlots() {
            const slotsDiv = document.getElementById('slots');
            slotsDiv.innerHTML = '';
            slots.forEach((time, index) => {
                const isBooked = bookings.some(b => b.time === time && !b.paid);
                const slot = document.createElement('div');
                slot.className = `slot ${isBooked ? 'booked' : 'available'}`;
                slot.innerHTML = `<strong>${time}</strong>`;
                if (!isBooked) {
                    slot.onclick = () => selectSlot(time);
                } else {
                    slot.title = 'Upptagen';
                }
                slotsDiv.appendChild(slot);
            });
            updateBookings();
        }

        function selectSlot(time) {
            selectedTime = time;
            document.getElementById('bookingForm').style.display = 'block';
            document.getElementById('name').focus();
            window.scrollTo(0, document.body.scrollHeight);
        }

        function bookSlot() {
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('customerEmail').value.trim();
            const servicePrice = document.getElementById('service').value;

            if (!name || !phone || !email || !selectedTime) {
                alert(lang === 'sv' ? 'Fyll i alla f√§lt!' : 'ÿßŸÖŸÑÿ£ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ!');
                return;
            }

            const booking = {
                id: Date.now(),
                name, phone, email, time: selectedTime,
                service: servicePrice === '99' ? 'Ny Kund 99 SEK' : 'Vanlig Klipp 250 SEK',
                price: parseInt(servicePrice),
                date: new Date().toISOString().split('T')[0],
                paid: false,
                bookedAt: new Date().toLocaleString('sv-SE')
            };

            bookings.unshift(booking); // ÿ£ÿ≠ÿØÿ´ ŸÅŸä ÿßŸÑÿ£ŸàŸÑ
            localStorage.setItem('goldenFingersBookings', JSON.stringify(bookings));

            // ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÉ + ÿ™ÿ£ŸÉŸäÿØ ŸÑŸÑÿ≤ÿ®ŸàŸÜ
            sendNotifications(booking);
            
            alert(`‚úÖ Bokat! Betala ${booking.price} SEK till Swish ${swishNumber}`);
            document.getElementById('bookingForm').style.display = 'none';
            document.querySelectorAll('input, select').forEach(el => el.value = '');
            initSlots();
        }

        async function sendNotifications(booking) {
            const message = `üÜï NY BOKNING Golden Fingers!
${booking.name} (${booking.phone})
‚è∞ ${booking.time}
üí∞ ${booking.price} SEK
üìÖ ${booking.date}`;
            
            // ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÉ
            emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
                to_email: salonEmail,
                to_phone: salonPhone,
                message: message,
                salon_name: 'Golden Fingers Sk√∂vde'
            }).then(() => console.log('ÿ•ÿ¥ÿπÿßÿ±ŸÉ ŸÖÿ±ÿ≥ŸÑ!')).catch(e => console.log('EmailJS error:', e));

            // ÿ™ÿ£ŸÉŸäÿØ ŸÑŸÑÿ≤ÿ®ŸàŸÜ
            emailjs.send("YOUR_SERVICE_ID", "customer_template", {
                to_email: booking.email,
                name: booking.name,
                time: booking.time,
                price: booking.price,
                swish: swishNumber,
                message: `Tack ${booking.name}! Din tid ${booking.time} hos Golden Fingers.
Betal ${booking.price} SEK till Swish: ${swishNumber}
‚ö†Ô∏è Ingen √•terbetalning vid avbokning!`
            });
        }

        function updateBookings() {
            const list = document.getElementById('bookingList');
            const todayBookings = bookings.filter(b => b.date === new Date().toISOString().split('T')[0]);
            
            if (todayBookings.length) {
                list.innerHTML = todayBookings.map(b => 
                    `<div style="padding: 15px; margin: 10px 0; background: ${b.paid ? '#d4edda' : '#f8d7da'}; border-radius: 15px; text-align: left;">
                        <strong>‚è∞ ${b.time}</strong> | ${b.name} | ${b.service} 
                        <span style="float: right; color: ${b.paid ? 'green' : 'orange'}">
                            ${b.paid ? '‚úÖ Betald' : '‚è≥ V√§ntar betalning'}
                        </span>
                    </div>`
                ).join('');
            } else {
                list.innerHTML = '<p style="color: #666; font-style: italic;">Inga bokningar idag üéâ</p>';
            }
        }

        // ÿ™ÿ∞ŸÉŸäÿ± 30 ÿØŸÇŸäŸÇÿ© ŸÇÿ®ŸÑ ÿßŸÑŸÖŸàÿπÿØ
        setInterval(() => {
            const now = new Date();
            bookings.forEach(b => {
                const bookingTime = new Date(`${b.date}T${b.time}:00`);
                const timeDiff = bookingTime - now;
                
                if (timeDiff > 0 && timeDiff <= 30 * 60 * 1000 && !b.reminded) {
                    console.log(`üö® TIPS 30min: ${b.name} kl ${b.time}`);
                    // ŸáŸÜÿß Twilio SMS ŸÑŸà ÿπÿßŸäÿ≤ ÿ™ÿ∂ŸäŸÅŸá
                    b.reminded = true;
                    localStorage.setItem('goldenFingersBookings', JSON.stringify(bookings));
                }
            });
        }, 60000); // ŸÉŸÑ ÿØŸÇŸäŸÇÿ©

        // ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÑŸÇÿßÿ¶Ÿä
        initSlots();
        setInterval(initSlots, 3000);
        
        // ÿ≤ÿ± ÿπŸÑÿßŸÖÿ© ÿßŸÑÿØŸÅÿπ (ŸÑŸÑÿßÿÆÿ™ÿ®ÿßÿ±)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'p') { // ÿßÿ∂ÿ∫ÿ∑ P ŸÑÿ™ŸÖŸàŸäŸÑ ÿ¢ÿÆÿ± ÿ≠ÿ¨ÿ≤
                const last = bookings.findLast(b => !b.paid);
                if (last) {
                    last.paid = true;
                    localStorage.setItem('goldenFingersBookings', JSON.stringify(bookings));
                    initSlots();
                    alert('‚úÖ ÿ™ŸÖ ÿßŸÑÿØŸÅÿπ!');
                }
            }
        });
    </script>
</body>
</html>
