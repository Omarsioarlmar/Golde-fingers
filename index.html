<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>Golden Fingers Sk√∂vde - Boka Nu!</title>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <style>
    body {
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
      font-family: Arial, sans-serif;
      animation: gradientShift 5s ease infinite;
      margin: 0;
      padding: 20px;
    }
    @keyframes gradientShift {
      0%,100%{background-position:0% 50%}
      50%{background-position:100% 50%}
    }
    .container { max-width: 1200px; margin: auto; text-align: center; }
    h1 {
      font-size: 3.5em;
      background: linear-gradient(45deg, #ffd700, #ffa500, #ffffff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: glow 2s ease-in-out infinite alternate;
      margin-bottom: 10px;
    }
    @keyframes glow {
      from { text-shadow: 0 0 20px #ffd700; }
      to   { text-shadow: 0 0 35px #ffa500; }
    }
    .btn {
      background: linear-gradient(45deg, #ffd700, #ffa500);
      padding: 15px 35px;
      border: none;
      border-radius: 40px;
      font-size: 18px;
      cursor: pointer;
      margin: 10px;
      animation: pulse 2s infinite;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }
    @keyframes pulse {
      0%,100%{transform:scale(1);}
      50%{transform:scale(1.05);}
    }
    .slot {
      padding: 18px 24px;
      margin: 10px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 20px;
      font-weight: bold;
      transition: all 0.3s;
      display: inline-block;
      min-width: 110px;
    }
    .available {
      background: linear-gradient(45deg, #4caf50, #45a049);
      color: #fff;
      box-shadow: 0 10px 20px rgba(76,175,80,0.5);
    }
    .available:hover { transform: scale(1.08); }
    .booked {
      background: linear-gradient(45deg, #f44336, #da190b);
      color: #fff;
      box-shadow: 0 10px 20px rgba(244,67,54,0.5);
    }
    #bookings {
      background: rgba(255,255,255,0.95);
      padding: 25px;
      border-radius: 22px;
      margin: 25px auto;
      max-width: 800px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.25);
      text-align: left;
    }
    #bookingForm {
      background: linear-gradient(135deg, #ffffff, #f5f5f5);
      padding: 30px;
      border-radius: 22px;
      max-width: 450px;
      margin: 25px auto;
      box-shadow: 0 15px 40px rgba(0,0,0,0.3);
      display: none;
      text-align: left;
    }
    input, select {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 12px;
      border: 2px solid #ddd;
      font-size: 15px;
      box-sizing: border-box;
    }
    .warning {
      background: linear-gradient(45deg, #ff9800, #f57c00);
      color: #fff;
      padding: 12px;
      border-radius: 14px;
      font-size: 13px;
      margin-top: 15px;
    }
    .swish-qr {
      max-width: 180px;
      margin: 15px auto;
      display: block;
    }
    .lang-btn {
      position: fixed;
      top: 15px;
      right: 15px;
      z-index: 1000;
      font-size: 14px;
      padding: 8px 18px;
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="btn lang-btn" onclick="toggleLang()">üá∏üá™ SV / üá∏üá¶ AR</button>

    <h1>üèÜ Golden Fingers Sk√∂vde üèÜ</h1>
    <p style="font-size:1.4em;color:#fff;font-weight:bold;margin-bottom:20px;">
      B√§sta Klipp 250 SEK | Ny Kund 99 SEK
    </p>

    <h2 id="timeTitle" style="color:#fff;font-size:2em;margin-bottom:15px;">
      V√§lj Tid Idag (8 platser)
    </h2>

    <div id="slots" style="display:flex;flex-wrap:wrap;justify-content:center;"></div>

    <div id="bookings">
      <h3 style="margin-top:0;">üìÖ Dagens bokningar</h3>
      <div id="bookingList"></div>
    </div>

    <div id="bookingForm">
      <h3>üìã Boka din tid</h3>
      <label>Namn</label>
      <input id="name" type="text" placeholder="Fullt namn" />
      <label>Telefon</label>
      <input id="phone" type="tel" placeholder="+46..." />
      <label>E‚Äëpost</label>
      <input id="customerEmail" type="email" placeholder="kund@mail.se" />
      <label>Tj√§nst</label>
      <select id="service">
        <option value="250">‚úÇÔ∏è Vanlig Klippning 250 SEK</option>
        <option value="99">üéâ Ny Kund 99 SEK</option>
      </select>
      <button class="btn" style="width:100%;margin-top:10px;" onclick="bookSlot()">
        ‚úÖ BOKA & BETALA SWISH
      </button>

      <div class="warning">
        ‚ö†Ô∏è AVBOKNING: Ingen √•terbetalning. Vid avbokning f√∂rloras hela beloppet.
      </div>

      <div style="margin-top:15px;text-align:center;">
        <h4>üí∞ Swish betalning</h4>
        <p style="font-size:20px;font-weight:bold;color:#4caf50;">1236112585</p>
        <img
          class="swish-qr"
          src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=SWISH:1236112585"
          alt="Swish QR"
        />
        <p style="font-size:12px;">Skanna QR eller ange numret i Swish‚Äëappen.</p>
      </div>
    </div>
  </div>

  <script>
    // ÿ™ŸáŸäÿ¶ÿ© EmailJS ÿ®ŸÖŸÅÿ™ÿßÿ≠ŸÉ
    emailjs.init("RdqnDhUxmbBR69lCQ"); // Public Key ÿ™ÿ®ÿπŸÉ [web:46][web:39]

    const salonPhone = "+46724444101";
    const salonEmail = "omar1tftnaze@gmail.com";
    const swishNumber = "1236112585";

    let lang = "sv";
    const slots = ["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"];
    let bookings = JSON.parse(localStorage.getItem("goldenFingersBookings")) || [];
    let selectedTime = null;

    function toggleLang() {
      lang = lang === "sv" ? "ar" : "sv";
      document.getElementById("timeTitle").textContent =
        lang === "sv" ? "V√§lj Tid Idag (8 platser)" : "ÿßÿÆÿ™ÿ± ŸàŸÇÿ™ ÿßŸÑŸäŸàŸÖ (Ÿ® ŸÖŸàÿßÿπŸäÿØ)";
    }

    function initSlots() {
      const slotsDiv = document.getElementById("slots");
      slotsDiv.innerHTML = "";
      const today = new Date().toISOString().split("T")[0];

      slots.forEach(time => {
        const taken = bookings.some(
          b => b.time === time && b.date === today && !b.paid
        );
        const div = document.createElement("div");
        div.className = "slot " + (taken ? "booked" : "available");
        div.textContent = time;
        if (!taken) div.onclick = () => selectSlot(time);
        slotsDiv.appendChild(div);
      });

      updateBookings();
    }

    function selectSlot(time) {
      selectedTime = time;
      document.getElementById("bookingForm").style.display = "block";
      document.getElementById("name").focus();
      window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
    }

    function bookSlot() {
      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const email = document.getElementById("customerEmail").value.trim();
      const priceVal = document.getElementById("service").value;

      if (!name || !phone || !email || !selectedTime) {
        alert(lang === "sv" ? "Fyll i alla f√§lt!" : "ÿßŸÖŸÑÿ£ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ!");
        return;
      }

      const today = new Date().toISOString().split("T")[0];

      const booking = {
        id: Date.now(),
        name,
        phone,
        email,
        time: selectedTime,
        price: parseInt(priceVal),
        service:
          priceVal === "99" ? "Ny Kund 99 SEK" : "Vanlig Klippning 250 SEK",
        date: today,
        createdAt: new Date().toLocaleString("sv-SE"),
        paid: false,
        reminded: false
      };

      bookings.unshift(booking);
      localStorage.setItem("goldenFingersBookings", JSON.stringify(bookings));

      sendOwnerEmail(booking);
      sendCustomerEmail(booking);

      alert(
        `‚úÖ Bokat!
Betala ${booking.price} SEK till Swish ${swishNumber}.`
      );

      document.getElementById("bookingForm").style.display = "none";
      document.querySelectorAll("#bookingForm input").forEach(i => (i.value = ""));
      document.getElementById("service").value = "250";
      selectedTime = null;
      initSlots();
    }

    // ÿ•ŸäŸÖŸäŸÑ ŸÑÿµÿßÿ≠ÿ® ÿßŸÑÿµÿßŸÑŸàŸÜ (Template: template_erd8bqc)
    function sendOwnerEmail(booking) {
      emailjs
        .send("service_osd1mqu", "template_erd8bqc", { // Template ID ÿ™ÿ®ÿπŸÉ [web:39]
          to_email: salonEmail,
          name: booking.name,
          phone: booking.phone,
          time: booking.time,
          price: booking.price,
          message: `
NY BOKNING!

Namn: ${booking.name}
Telefon: ${booking.phone}
Tid: ${booking.time}
Pris: ${booking.price} SEK

Golden Fingers Sk√∂vde
`
        })
        .then(() => console.log("Owner email sent"))
        .catch(err => console.log("EmailJS error:", err));
    }

    // ÿ•ŸäŸÖŸäŸÑ ÿ™ÿ£ŸÉŸäÿØ ŸÑŸÑÿ≤ÿ®ŸàŸÜ (ŸÜŸÅÿ≥ ÿßŸÑÿ™ŸÖÿ®ŸÑŸäÿ™ ÿ≠ÿßŸÑŸäÿßŸãÿå ÿ™ŸÇÿØÿ± ÿ™ÿπŸÖŸÑ ŸÑŸá Template ÿ´ÿßŸÜŸä ŸÑÿßÿ≠ŸÇÿßŸã)
    function sendCustomerEmail(booking) {
      emailjs.send("service_osd1mqu", "template_erd8bqc", {
        to_email: booking.email,
        name: booking.name,
        phone: booking.phone,
        time: booking.time,
        price: booking.price,
        message: `
Tack ${booking.name}!

Din tid: ${booking.time}
Belopp: ${booking.price} SEK
Swish: ${swishNumber}

Viktigt: Ingen √•terbetalning vid avbokning.
`
      });
    }

    function updateBookings() {
      const today = new Date().toISOString().split("T")[0];
      const listDiv = document.getElementById("bookingList");
      const todayBookings = bookings.filter(b => b.date === today);

      if (!todayBookings.length) {
        listDiv.innerHTML =
          "<p style='color:#777;font-style:italic;'>Inga bokningar idag.</p>";
        return;
      }

      listDiv.innerHTML = todayBookings
        .map(
          b => `
        <div style="margin:8px 0;padding:10px 12px;border-radius:14px;
                    background:${b.paid ? "#d4edda" : "#ffe0b2"};">
          <strong>${b.time}</strong> ‚Äì ${b.name} (${b.service})
          <span style="float:right;color:${b.paid ? "green" : "orange"};">
            ${b.paid ? "Betald" : "Obetald"}
          </span>
        </div>
      `
        )
        .join("");
    }

    // ÿ™ÿ∞ŸÉŸäÿ± ÿØÿßÿÆŸÑŸä 30 ÿØŸÇŸäŸÇÿ© ŸÇÿ®ŸÑ ÿßŸÑŸÖŸàÿπÿØ (ÿ™ŸÇÿØÿ± ŸÑÿßÿ≠ŸÇÿßŸã ÿ™ÿ±ÿ®ÿ∑Ÿá ÿ®ŸÄ SMS/WhatsApp)
    setInterval(() => {
      const now = new Date();
      bookings.forEach(b => {
        const bookingTime = new Date(`${b.date}T${b.time}:00`);
        const diff = bookingTime - now;
        if (diff > 0 && diff <= 30 * 60 * 1000 && !b.reminded) {
          console.log(`‚è∞ P√•minnelse: ${b.name} om 30 min (${b.time})`);
          b.reminded = true;
          localStorage.setItem("goldenFingersBookings", JSON.stringify(bookings));
        }
      });
    }, 60000);

    // ÿπŸÑÿßŸÖÿ© ÿØŸÅÿπ (ÿßÿÆÿ™ÿ®ÿßÿ±): ÿ≤ÿ± P ŸÖŸÜ ÿßŸÑŸÉŸäÿ®Ÿàÿ±ÿØ ŸäÿπŸÑŸëŸÖ ÿ¢ÿÆÿ± ÿ≠ÿ¨ÿ≤ ÿ∫Ÿäÿ± ŸÖÿØŸÅŸàÿπ ŸÉŸÄ Paid
    document.addEventListener("keydown", e => {
      if (e.key.toLowerCase() === "p") {
        const idx = bookings.findIndex(b => !b.paid);
        if (idx !== -1) {
          bookings[idx].paid = true;
          localStorage.setItem("goldenFingersBookings", JSON.stringify(bookings));
          initSlots();
          alert("‚úÖ Markeras som betald (test).");
        }
      }
    });

    initSlots();
  </script>
</body>
</html>
